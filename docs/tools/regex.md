# 正则表达式

## Quantifiers(限定符)

- `?` 限定符，表示前面这个字符可有可无(**出现0次或1次**)：如`r"https?"`可以匹配 `http` 和 `https`

    ```python
    r"https?"
    http
    https
    ```

- `*` 限定符，表示前面这个字符可有可无(**出现0次或无限多次**)：如`r"ab*c"`可以匹配：

    ```python
    r"ab*c"
    ac
    abbc
    abbbbbbbc
    ```

- `+` 限定符，限定前面的字符**出现1次以上**：如`r"ab+c"`，则上例中`ac`不会被匹配

- `{}`限定符，限定前面字符出现的具体次数，如`r"ab{2,6}c"`表示限定`b`出现2到6次；如果要表示2次以上：`{2,}`；如果要只匹配出现6次：`{6}`

    ```python
    r"ab{2,4}c"
    abbc
    abbbbbbc # !不会被匹配
    ```

上面举的例子都是对于单个字符重复匹配，如果对于多个字符的重复，可以将要重复匹配的部分使用小括号`()`括起来：

```python
r"(ab){2,3}c"
ababc
abababc
```

## OR Operator(或运算)

`|`在正则中表示或运算，如`r"a (cat|dog)"`将匹配 a dog 或 a cat；注意这里括号不可以少，否则便成了 a cat 或者 dog

```python
a (cat|dog)"
a cat
a dog
a bird	# !不匹配
```

## Character class(字符类)

`[]`方括号可以限定字符类，如`[abc]+`表示匹配只由`abc`三个字符构成的单词：

```python
r"[abc]+"
abc
abcd	# !不匹配
aaabccc
```

`[a-zA-Z0-9]`表示限定所有的字母和数字；可以使用`^`表示取反的逻辑，如`[^0-9]`表示匹配所有不含数字`0-9`的字符(包含换行符)

## meta-character(元字符)

大多数元字符以`\`开头：

- `\d`表示数字；`\D`表示非数字字符
- `\w`表示单词(英文字符，数字，下划线)；`\W`表示非单词字符
- `\s`表示空白符(包含tab和换行符)；`\S`表示非空白符
- `.`表示任意字符(但不包含换行符)
- `^`匹配行首，`$`匹配行尾；如`r"^a"`只会匹配行首的`a`，`a$`只会匹配行尾的`a`

## Greedy v.s. Lazy Match

`*+{}`默认会去匹配尽可能多的字符，如使用`r"<.+>"`时，如果只想匹配下例中的标签：

```python
r"<.+>"
<span><b>Sample String</b><span>
```

实际上却会匹配整个句子，这是因为`.+`会匹配尽可能多的字符，也包含`>`，因此会匹配整个句子。解决方法是使用`r"<.+?>"`，这里加的`?`会把Greedy Match 的行为变为惰性匹配，一旦出现`>`就视为一次匹配